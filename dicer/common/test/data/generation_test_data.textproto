# proto-file: dicer/common/test/proto/test_data.proto
# proto-message: GenerationTestDataP

invalid_generation_test_cases: [
  {
    description: "Negative version"
    generation { incarnation: 42 number: -1 }
    expected_error: "Unix time version must be non-negative"
  },
  {
    description: "Negative incarnation"
    generation { incarnation: -1 }
    expected_error: "Incarnation number must be non-negative"
  },
  {
    description: "Incarnation equal to 5 << 48"
    generation { incarnation: 1407374883553280 }
    expected_error: "Value is too large (1407374883553280 >= (5 << 48)). Was this intentional?"
  },
  {
    description: "Incarnation equal to max int64"
    generation: { incarnation: 9223372036854775807 }
    expected_error: "Value is too large (9223372036854775807 >= (5 << 48)). Was this intentional?"
  }
]

canonical_generation_test_cases: [
  {
    description: "Default proto"
    generation { }
    expected_canonical_generation { incarnation: 0 number: 0 }
  },
  {
    description: "Default incarnation"
    generation { number: 42 }
    expected_canonical_generation { incarnation: 0 number: 42 }
  },
  {
    description: "Default number"
    generation { incarnation: 42 }
    expected_canonical_generation { incarnation: 42 number: 0 }
  }
]

loose_incarnation_numbers: [0, 1, 3, 7, 997, 1997, 4997] # 0 and positive odd numbers are "loose"

strict_incarnation_numbers: [2, 4, 6, 8, 998, 1998, 4998] # positive even numbers are "strict"

# Generations in expected sort order (by incarnation then by number).
ordered_generations: [
  { incarnation: 0 number: 0 }, # minimum generation
  { incarnation: 0 number: 12 },
  { incarnation: 0 number: 9223372036854775807 }, # maximum number
  { incarnation: 41 number: 12 },
  { incarnation: 41 number: 89 },
  { incarnation: 42 number: 23 },
  { incarnation: 42 number: 45 },
  { incarnation: 43 number: 5 },
  { incarnation: 43 number: 98 },
  { incarnation: 1703182631 number: 45 },
  { incarnation: 1703182632 number: 45 },
  { incarnation: 1407374883553279 number: 0 }, # maximum incarnation
  { incarnation: 1407374883553279 number: 1 },
  { incarnation: 1407374883553279 number: 9223372036854775807 }
]

expected_next_loose_incarnations: [
  { key: 0 value: 1 },
  { key: 1 value: 3 },
  { key: 2 value: 3 },
  { key: 4 value: 5 },
  { key: 1337 value: 1339 }
]

expected_next_strict_incarnations: [
  { key: 0 value: 2 },
  { key: 1 value: 2 },
  { key: 2 value: 4 },
  { key: 4 value: 6 },
  { key: 1337 value: 1338 }
]

to_string_test_cases: [
  {
    generation { incarnation: 0 number: 0 }
    expected_string: "0#0 (1970-01-01T00:00:00Z)"
  },
  {
    generation { incarnation: 42 number: 1000 }
    expected_string: "42#1000 (1970-01-01T00:00:01Z)"
  }
]
